{% extends "base.html" %}

{% block title %}
<title> Food Mapper | Add a Map </title>
{% endblock %}

{% block content %}
<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<div class="container">
	<form class="" action="/api/maps/" method="POST">
	<fieldset>
		{% csrf_token %}
		<input class="hidden" name="next" value="/maps/"/>
		<div class="control-group">
			<label for="id_name" class="control-label">New Map Name</label>
			<div class="controls">
				<input id="id_name" name="name" type="text">
			</div>
		</div>
		<div class="control-group">
			<label for="id_description" class="control-label">New Map Description</label>
			<div class="controls">
				<input id="id_description" name="description" type="text">
			</div>
		</div>
		<div class="form-actions">
			<button class="btn btn-primary" title="submit new map to API">POST</button>
		</div>
	</fieldset>
	</form>
	<div class="btn" id="submitAjax">AJAX</div>

</div>

<script type="text/javascript">

$('#submitAjax').on('click', submitAjax2);

function submitAjax() {
	alert('submit');
	$.getJSON('/api/maps/', function(data){
		console.log(data);
	});

}
function submitAjax2() {
	alert('submit');
	$.ajax({
		type: "POST",
		url: "/api/maps/",
		data: {
			"name": 'testname', 
			"description": 'testdesc'},
		dataType: "json",
		headers: {
			"X-CSRFToken": '{{csrf_token}}'
		},
		success: function(data, textStatus) {
			window.location.href = '/maps/';
		}
	});
	
}

</script>
{% endblock %}